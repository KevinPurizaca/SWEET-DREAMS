"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[8860],{8860:(V,C,r)=>{r.r(C),r.d(C,{ProfilesModule:()=>L});var f=r(1368),u=r(4280),b=r(2024),h=r(2884),d=r(6876),k=r(9280),e=r(2116),p=r(4716),x=r(1792),E=r(5352),g=r(7564),R=r(3340),P=r(920),_=r(7252),y=r(232),O=r(2736),v=r(1148),G=r(6304),T=r(6316),$=r(3536),I=r(1864),M=r(312);function Y(l,c){1&l&&(e.I0R(0,"tr")(1,"th",27),e.OEk(2,"Id"),e.C$Y(),e.I0R(3,"th",28),e.OEk(4,"Descripci\xf3n"),e.C$Y(),e.I0R(5,"th",29),e.OEk(6,"Estado"),e.C$Y(),e.I0R(7,"th",30),e.OEk(8,"Acciones"),e.C$Y()())}function w(l,c){if(1&l){const o=e.KQA();e.I0R(0,"tr")(1,"td",31),e.OEk(2),e.C$Y(),e.I0R(3,"td",28),e.OEk(4),e.C$Y(),e.I0R(5,"td",29),e.OEk(6),e.C$Y(),e.I0R(7,"td",30)(8,"button",32),e.qCj("click",function(){const n=e.usT(o).$implicit,i=e.GaO();return e.CGJ(i.viewModal(3,n))}),e.C$Y(),e.I0R(9,"button",33),e.qCj("click",function(){const n=e.usT(o).$implicit,i=e.GaO();return e.CGJ(i.viewModal(2,n))}),e.C$Y(),e.I0R(10,"button",34),e.qCj("click",function(t){const i=e.usT(o).$implicit,a=e.GaO();return e.CGJ(a.deleteTableHeadboard(t,i))}),e.C$Y()()()}if(2&l){const o=c.$implicit;e.yG2(2),e.cNF(o.vcode),e.yG2(2),e.cNF(o.vdescription),e.yG2(2),e.cNF(o.vstate_record)}}function S(l,c){1&l&&(e.I0R(0,"tr")(1,"td",35),e.OEk(2,"No se encontr\xf3 Informaci\xf3n."),e.C$Y()())}function j(l,c){1&l&&(e.I0R(0,"tr")(1,"td",35),e.OEk(2," Cargando informaci\xf3n. Espere por favor. "),e.C$Y()())}function A(l,c){if(1&l){const o=e.KQA();e.I0R(0,"tr")(1,"th",41)(2,"span",42),e.OEk(3,"#"),e.C$Y()(),e.I0R(4,"th",43),e.OEk(5,"Modulo"),e.C$Y(),e.I0R(6,"th",44),e.OEk(7,"Opcion del Sistema"),e.C$Y(),e.I0R(8,"th",45)(9,"div",46)(10,"p-checkbox",47),e.qCj("onChange",function(t){e.usT(o);const n=e.GaO(2);return e.CGJ(n.selectCheckAll(n.lstOptionsModule,1,t))}),e.C$Y(),e.OEk(11,"\xa0Ver "),e.C$Y()(),e.I0R(12,"th",45)(13,"div",48)(14,"p-checkbox",47),e.qCj("onChange",function(t){e.usT(o);const n=e.GaO(2);return e.CGJ(n.selectCheckAll(n.lstOptionsModule,2,t))}),e.C$Y(),e.OEk(15,"\xa0Crear "),e.C$Y()(),e.I0R(16,"th",45)(17,"div",49)(18,"p-checkbox",47),e.qCj("onChange",function(t){e.usT(o);const n=e.GaO(2);return e.CGJ(n.selectCheckAll(n.lstOptionsModule,3,t))}),e.C$Y(),e.OEk(19,"\xa0Editar "),e.C$Y()(),e.I0R(20,"th",45)(21,"div",49)(22,"p-checkbox",47),e.qCj("onChange",function(t){e.usT(o);const n=e.GaO(2);return e.CGJ(n.selectCheckAll(n.lstOptionsModule,4,t))}),e.C$Y(),e.OEk(23,"\xa0Borrar "),e.C$Y()()()}2&l&&(e.yG2(10),e.E7m("binary",!0),e.yG2(4),e.E7m("binary",!0),e.yG2(4),e.E7m("binary",!0),e.yG2(4),e.E7m("binary",!0))}function N(l,c){if(1&l){const o=e.KQA();e.I0R(0,"tr",50)(1,"td",51)(2,"span",42),e.OEk(3),e.C$Y()(),e.I0R(4,"td",52)(5,"span",53),e.OEk(6),e.C$Y()(),e.I0R(7,"td",54)(8,"span",53),e.OEk(9,"OPCI\xd3N DEL SISTEMA"),e.C$Y()(),e.I0R(10,"td",55)(11,"div",46)(12,"p-checkbox",56),e.qCj("onChange",function(t){const i=e.usT(o).$implicit,a=e.GaO(2);return e.CGJ(a.selectCheckAllModule(a.lstOptionsModule,i.iid_module,1,t))}),e.C$Y(),e.OEk(13," Ver "),e.C$Y()(),e.I0R(14,"td",55)(15,"div",48)(16,"p-checkbox",56),e.qCj("onChange",function(t){const i=e.usT(o).$implicit,a=e.GaO(2);return e.CGJ(a.selectCheckAllModule(a.lstOptionsModule,i.iid_module,2,t))}),e.C$Y(),e.OEk(17," Crear "),e.C$Y()(),e.I0R(18,"td",55)(19,"div",49)(20,"p-checkbox",56),e.qCj("onChange",function(t){const i=e.usT(o).$implicit,a=e.GaO(2);return e.CGJ(a.selectCheckAllModule(a.lstOptionsModule,i.iid_module,3,t))}),e.C$Y(),e.OEk(21," Editar "),e.C$Y()(),e.I0R(22,"td",55)(23,"div",49)(24,"p-checkbox",56),e.qCj("onChange",function(t){const i=e.usT(o).$implicit,a=e.GaO(2);return e.CGJ(a.selectCheckAllModule(a.lstOptionsModule,i.iid_module,4,t))}),e.C$Y(),e.OEk(25," Borrar "),e.C$Y()()()}if(2&l){const o=c.$implicit;e.yG2(3),e.cNF(o.iid_module),e.yG2(3),e.cNF(o.vname_module),e.yG2(6),e.E7m("binary",!0),e.yG2(4),e.E7m("binary",!0),e.yG2(4),e.E7m("binary",!0),e.yG2(4),e.E7m("binary",!0)}}const m=()=>({standalone:!0});function B(l,c){if(1&l){const o=e.KQA();e.I0R(0,"tr"),e.wR5(1,"td",51),e.I0R(2,"td",43)(3,"span",57),e.OEk(4),e.C$Y()(),e.I0R(5,"td",44)(6,"span",57),e.OEk(7),e.C$Y()(),e.I0R(8,"td",45)(9,"div",58)(10,"p-checkbox",59),e.iHE("ngModelChange",function(t){const i=e.usT(o).$implicit;return e.kNx(i.baccess_view,t)||(i.baccess_view=t),e.CGJ(t)}),e.qCj("onChange",function(t){const i=e.usT(o).$implicit,a=e.GaO(2);return e.CGJ(a.selectCheck(i,1,t))}),e.C$Y()()(),e.I0R(11,"td",45)(12,"div",58)(13,"p-checkbox",59),e.iHE("ngModelChange",function(t){const i=e.usT(o).$implicit;return e.kNx(i.baccess_create,t)||(i.baccess_create=t),e.CGJ(t)}),e.qCj("onChange",function(t){const i=e.usT(o).$implicit,a=e.GaO(2);return e.CGJ(a.selectCheck(i,2,t))}),e.C$Y()()(),e.I0R(14,"td",45)(15,"div",58)(16,"p-checkbox",59),e.iHE("ngModelChange",function(t){const i=e.usT(o).$implicit;return e.kNx(i.baccess_update,t)||(i.baccess_update=t),e.CGJ(t)}),e.qCj("onChange",function(t){const i=e.usT(o).$implicit,a=e.GaO(2);return e.CGJ(a.selectCheck(i,3,t))}),e.C$Y()()(),e.I0R(17,"td",45)(18,"div",58)(19,"p-checkbox",59),e.iHE("ngModelChange",function(t){const i=e.usT(o).$implicit;return e.kNx(i.baccess_delete,t)||(i.baccess_delete=t),e.CGJ(t)}),e.qCj("onChange",function(t){const i=e.usT(o).$implicit,a=e.GaO(2);return e.CGJ(a.selectCheck(i,4,t))}),e.C$Y()()()()}if(2&l){const o=c.$implicit;e.yG2(4),e.cNF(o.vname_module),e.yG2(3),e.cNF(o.vname_option),e.yG2(3),e.OKB("ngModel",o.baccess_view),e.E7m("binary",!0)("ngModelOptions",e.q4q(14,m)),e.yG2(3),e.OKB("ngModel",o.baccess_create),e.E7m("binary",!0)("ngModelOptions",e.q4q(15,m)),e.yG2(3),e.OKB("ngModel",o.baccess_update),e.E7m("binary",!0)("ngModelOptions",e.q4q(16,m)),e.yG2(3),e.OKB("ngModel",o.baccess_delete),e.E7m("binary",!0)("ngModelOptions",e.q4q(17,m))}}function J(l,c){1&l&&(e.I0R(0,"tr")(1,"td",35),e.OEk(2,"No se encontr\xf3 Informaci\xf3n."),e.C$Y()())}function D(l,c){1&l&&(e.I0R(0,"tr")(1,"td",35),e.OEk(2," Cargando Informaci\xf3n. Espere por favor. "),e.C$Y()())}function F(l,c){if(1&l&&(e.I0R(0,"p-panel",36)(1,"form",3)(2,"div",4)(3,"div",37)(4,"label",6),e.OEk(5,"Nombre"),e.C$Y(),e.wR5(6,"input",7),e.C$Y(),e.I0R(7,"div",38)(8,"label",6),e.OEk(9,"Descripcion"),e.C$Y(),e.wR5(10,"input",8),e.C$Y(),e.I0R(11,"div",5)(12,"label",6),e.OEk(13,"Estado"),e.C$Y(),e.wR5(14,"p-dropdown",9),e.C$Y()()(),e.wR5(15,"br"),e.I0R(16,"p-table",39),e.yuY(17,A,24,4,"ng-template",19)(18,N,26,6,"ng-template",40)(19,B,20,18,"ng-template",20)(20,J,3,0,"ng-template",21)(21,D,3,0,"ng-template",22),e.C$Y()()),2&l){const o=e.GaO();e.E7m("toggleable",!1),e.yG2(),e.E7m("formGroup",o.formRegisterEditProfile),e.yG2(13),e.E7m("placeholder",o.vMessageSelect)("emptyMessage",o.vMessageEmpty)("options",o.lstState),e.yG2(2),e.E7m("value",o.lstOptionsModule)}}function q(l,c){if(1&l){const o=e.KQA();e.I0R(0,"button",60),e.qCj("click",function(){e.usT(o);const t=e.GaO();return e.CGJ(t.vmEditRegisterProfile=!1)}),e.C$Y(),e.I0R(1,"button",61),e.qCj("click",function(){e.usT(o);const t=e.GaO();return e.CGJ(t.saveProfile())}),e.C$Y()}}const K=()=>({width:"900px",height:"600px"});let H=(()=>{class l{constructor(o,s,t,n,i){this.httpCoreService=t,this.commonService=n,this.confirmationService=i,this.lstProfiles=[],this.lstOptionsModule=[],this.titleEditRegisterProfile="",this.vmEditRegisterProfile=!1,this.totalRecord=0,this.first=0,this.rowsDefault=d.AN,this.rowsOptions=d.WA,this.vMessageEmpty=h.CM,this.vMessageSelect=h.y6,this.lstState=[],this.paramTDState=d.eE.STATES,this.req={iid_table_headboard:-1,vdescription:"",istate_record:-1,iindex:0,ilimit:d.AN},this.formSearch=o.group({txtName:[""],txtDescription:[""],intState:[1]}),this.formRegisterEditProfile=s.group({txtName:[""],txtDescription:[""],intState:[1]})}ngOnInit(){this.loadStateCB(),this.loadOptionsByModule()}viewModal(o,s){1===o&&(this.lsProfilesDto={},this.lsProfilesDto.iid_profile=0,this.titleEditRegisterProfile="Registrar Perfil",this.vmEditRegisterProfile=!0)}loadData(o){}changePage(o){this.req.iindex=o.first,this.req.ilimit=o.rows,this.first=o.first,this.loadData(this.req)}loadStateCB(){this.httpCoreService.getDataCb(this.paramTDState).subscribe(o=>{o.isSuccess&&(this.lstState=o.data)})}loadOptionsByModule(){this.httpCoreService.post({iid_option:-1,iid_module:-1,vname_module:"",vname_option:"",vdescription_module:"",vdescription_option:"",istate_record:1,iindex:0,ilimit:100},b.U.GetListOptionsByModulo).subscribe(s=>{s.isSuccess&&(this.lstOptionsModule=s.data)})}saveProfile(){for(let n in this.formRegisterEditProfile.controls)this.formRegisterEditProfile.controls[n].markAsTouched();this.lstOptionsModule.map(n=>({iid_module:n.iid_module,iid_option:n.iid_option,iid_profile:n.iid_profile,baccess_view:!!n.baccess_view,baccess_create:!!n.baccess_create,baccess_update:!!n.baccess_update,baccess_delete:!!n.baccess_delete}))}selectCheckAll(o,s,t){o.forEach(function(n){switch(s){case 1:n.baccess_view=t.checked;break;case 2:n.baccess_create=t.checked;break;case 3:n.baccess_update=t.checked;break;case 4:n.baccess_delete=t.checked}})}selectCheckAllModule(o,s,t,n){o.filter(i=>i.iid_module==s).forEach(i=>{switch(t){case 1:i.baccess_view=n.checked;break;case 2:i.baccess_create=n.checked;break;case 3:i.baccess_update=n.checked;break;case 4:i.baccess_delete=n.checked}})}selectCheck(o,s,t){switch(s){case 1:o.baccess_view=t.checked;break;case 2:o.baccess_create=t.checked;break;case 3:o.baccess_update=t.checked;break;case 4:o.baccess_delete=t.checked}}static#e=this.\u0275fac=function(s){return new(s||l)(e.GI1(p.im),e.GI1(p.im),e.GI1(x.c),e.GI1(E.G),e.GI1(g.EV))};static#t=this.\u0275cmp=e.In1({type:l,selectors:[["app-profiles"]],standalone:!0,features:[e.UHJ],decls:35,vars:20,consts:[["key","tst",3,"baseZIndex"],["key","deleteDetalle"],["header","Busqueda de Perfiles"],[3,"formGroup"],[1,"grid","p-formgrid","p-fluid"],[1,"col-12","md:col-3"],[1,"label-filter-text"],["formControlName","txtName","type","text","pInputText","",1,"p-inputtext","p-component","p-element"],["formControlName","txtDescription","type","text","pInputText","",1,"p-inputtext","p-component","p-element"],["formControlName","intState","optionLabel","vvalue1","optionValue","id","appendTo","body",3,"placeholder","emptyMessage","options"],[1,"flex","flex-wrap","sm:flex-row"],[1,"sm:mr-auto","mb-3","mr-3"],["pButton","","label","Agregar Perfil","type","button","icon","pi pi-plus",1,"p-button-help",3,"click"],[1,"mb-3","mr-3"],["pButton","","label","Buscar","icon","pi pi-search","type","submit",1,"p-button-outlined","p-button-primary"],[1,""],["pButton","","label","Limpiar","type","button","icon","pi pi-trash",1,"p-button-outlined","p-button-secondary",3,"click"],["header","Resultado de Perfiles"],["scrollDirection","both","scrollHeight","400px","styleClass","mt-3","responsiveLayout","scroll","styleClass","p-datatable-gridlines",3,"value","scrollable"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","loadingbody"],["currentPageReportTemplate","Total : {totalRecords} registros",3,"rows","totalRecords","rowsPerPageOptions","showCurrentPageReport","first","onPageChange"],[1,"p-fluid",3,"visible","draggable","closable","header","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],[2,"min-width","5rem"],[2,"min-width","30rem"],[2,"min-width","15rem"],["pFrozenColumn","","alignFrozen","right",2,"min-width","5rem"],[1,"font-bold",2,"min-width","5rem"],["pButton","","icon","pi pi-eye","pTooltip","Ver Detalle","tooltipPosition","bottom",1,"text-blue-500","p-button-text",3,"click"],["pButton","","icon","pi pi-pencil","pTooltip","Editar","tooltipPosition","bottom",1,"text-green-500","p-button-text",3,"click"],["pButton","","icon","pi pi-trash","pTooltip","Eliminar","tooltipPosition","bottom",1,"text-red-500","p-button-text",3,"click"],["colspan","7"],["header","",1,"line-height-3",3,"toggleable"],[1,"col-12","md:col-4"],[1,"col-12","md:col-5"],["rowGroupMode","subheader","groupRowsBy","iid_module","styleClass","p-datatable-sm p-datatable-gridlines","responsiveLayout","scroll",3,"value"],["pTemplate","groupheader"],[1,"td-iid_option"],[1,"font-bold","flex","justify-content-center"],[1,"td-name"],[1,"td-description"],[1,"td-check"],[1,"ml-4","justify-content-item"],["pTooltip","Seleccionar todo","tooltipPosition","top",3,"binary","onChange"],[1,"ml-5","justify-content-item"],[1,"ml-6","justify-content-item"],["pRowGroupHeader","",1,"table-criterio-dialog"],[1,"txt-black-white","td-iid_option"],[1,"txt-black-white","td-name"],[1,"font-bold","uppercase"],[1,"txt-black-white","td-description"],[1,"txt-black-white","td-check"],["pTooltip","Seleccionar Sub M\xf3dulo","tooltipPosition","top",3,"binary","onChange"],[1,"flex","justify-content-start"],[1,"justify-content-item"],[3,"ngModel","binary","ngModelOptions","ngModelChange","onChange"],["pButton","","pRipple","","label","Cerrar","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Guardar","icon","pi pi-save",1,"p-button-text",3,"click"]],template:function(s,t){1&s&&(e.wR5(0,"p-toast",0)(1,"p-confirmPopup",1),e.I0R(2,"p-panel",2)(3,"form",3)(4,"div",4)(5,"div",5)(6,"label",6),e.OEk(7,"Nombre"),e.C$Y(),e.wR5(8,"input",7),e.C$Y(),e.I0R(9,"div",5)(10,"label",6),e.OEk(11,"Descripcion"),e.C$Y(),e.wR5(12,"input",8),e.C$Y(),e.I0R(13,"div",5)(14,"label",6),e.OEk(15,"Estado"),e.C$Y(),e.wR5(16,"p-dropdown",9),e.C$Y()(),e.I0R(17,"div",10)(18,"div",11)(19,"button",12),e.qCj("click",function(){return t.viewModal(1,null)}),e.C$Y()(),e.I0R(20,"div",13),e.wR5(21,"button",14),e.C$Y(),e.I0R(22,"div",15)(23,"button",16),e.qCj("click",function(){return t.formSearch.reset()}),e.C$Y()()()()(),e.wR5(24,"br"),e.I0R(25,"p-panel",17)(26,"p-table",18),e.yuY(27,Y,9,0,"ng-template",19)(28,w,11,3,"ng-template",20)(29,S,3,0,"ng-template",21)(30,j,3,0,"ng-template",22),e.C$Y(),e.I0R(31,"p-paginator",23),e.qCj("onPageChange",function(i){return t.changePage(i)}),e.C$Y()(),e.I0R(32,"p-dialog",24),e.iHE("visibleChange",function(i){return e.kNx(t.vmEditRegisterProfile,i)||(t.vmEditRegisterProfile=i),i}),e.yuY(33,F,22,6,"ng-template",25)(34,q,2,0,"ng-template",26),e.C$Y()),2&s&&(e.E7m("baseZIndex",99999),e.yG2(3),e.E7m("formGroup",t.formSearch),e.yG2(13),e.E7m("placeholder",t.vMessageSelect)("emptyMessage",t.vMessageEmpty)("options",t.lstState),e.yG2(10),e.E7m("value",t.lstProfiles)("scrollable",!0),e.yG2(5),e.E7m("rows",t.req.ilimit)("totalRecords",t.totalRecord)("rowsPerPageOptions",t.rowsOptions)("showCurrentPageReport",!0)("first",t.first),e.yG2(),e.m_g(e.q4q(19,K)),e.OKB("visible",t.vmEditRegisterProfile),e.E7m("draggable",!1)("closable",!1)("header",t.titleEditRegisterProfile)("modal",!0))},dependencies:[k.k,p.sz,p.ot,p.ue,p.u,p._G,p.uW,p.Wo,R.o,P.cS,g.U3,_.oJ,_._E,_.eU,y.A9,O.C,v.s,G.qA,T.C,$.W,I._,M.yw],styles:[".txt-black-white[_ngcontent-%COMP%]{color:#fff}.td-iid_option[_ngcontent-%COMP%]{min-width:3rem;max-width:3rem}.td-name[_ngcontent-%COMP%]{min-width:10rem;max-width:10rem}.td-description[_ngcontent-%COMP%]{min-width:12rem;max-width:12rem}.td-check[_ngcontent-%COMP%]{min-width:7.7rem;max-width:7.7rem}"]})}return l})(),Q=(()=>{class l{static#e=this.\u0275fac=function(s){return new(s||l)};static#t=this.\u0275mod=e.a4G({type:l});static#o=this.\u0275inj=e.s3X({imports:[u.qQ.forChild([{path:"",component:H}]),u.qQ]})}return l})(),L=(()=>{class l{static#e=this.\u0275fac=function(s){return new(s||l)};static#t=this.\u0275mod=e.a4G({type:l});static#o=this.\u0275inj=e.s3X({imports:[f.MD,Q]})}return l})()}}]);